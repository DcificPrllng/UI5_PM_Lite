<mvc:View class="sapUiSizeCompact" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"
	xmlns:html="http://www.w3.org/1999/xhtml" xmlns:table="sap.ui.table" xmlns:f="sap.ui.layout.form" busyIndicatorDelay="0"
	controllerName="pd.pm.lite.controller.ChangeOrder">
	<App>
		<pages>
			<Page title="{jsonModel>/WorkOrderDetail/OrderNumber}: {jsonModel>/WorkOrderDetail/ShortDescription}" showHeader="false" class="cisLabels">
				<content>
					<HBox justifyContent="Center" height="100%">
						<VBox width="90%" height="100%" direction="Column" alignContent="Center" alignItems="Center">
							<FlexBox width="100%" height="14%" direction="Column" class="PDHeader sapUiTinyMargin">
								<FlexBox width="100%" class="cisUiTinyMargin" justifyContent="Start">
									<Button type="Default" id="release" icon="sap-icon://flag" width="85px" text="{i18n>Release}" press=".ReleaseOrder"/>
									<Button class="sapUiTinyMarginBegin" type="Accept" id="save" icon="sap-icon://save" width="85px" text="{i18n>Save}" press=".SaveOrder"/>
									<Button class="sapUiTinyMarginBegin" type="Reject" id="cancel" icon="sap-icon://cancel" width="85px" text="{i18n>Cancel}" press=".GoHome"/>
									<Label width="146px" class="cisTopMargin" textAlign="Right" text="{i18n>Order}" design="Bold"/>
									<Text width="74px" class="sapUiTinyMarginBegin cisTopMargin"
										text="{path: 'jsonModel>/WorkOrderDetail/OrderNumber', formatter: '.formatter.removeLeadingZerosFromString'}"/>
									<Input width="300px" value="{path: 'jsonModel>/WorkOrderDetail/ShortDescription', type : 'pd.pm.lite.customTypes.Mandatory'}" maxLength="40"/>
									<Label class="sapUiTinyMarginBegin cisTopMargin" width="217px" textAlign="Right" text="{i18n>SystemStatus}" design="Bold"/>
									<Text class="sapUiTinyMarginBegin cisTopMargin" width="268px" text="{jsonModel>/WorkOrderDetail/SystemStatus}"/>
								</FlexBox>
								<FlexBox width="100%" class="cisUiTinyMargin" justifyContent="Start">
									<Label width="104px" textAlign="Right" text="{i18n>MainWorkCenter}" design="Bold"/>
									<Label width="200px"
										text="{parts: [{path: 'jsonModel>/WorkOrderDetail/MainWorkCenter'}, {path:'jsonModel>/WorkOrderDetail/MainWorkCenterName'}], formatter:'.formatter.commonIDFormatter'}"
										class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>FunLoc}" design="Bold"/>
									<Label width="300px"
										text="{parts:[{path: 'jsonModel>/WorkOrderDetail/FunctionalLocation'}, {path: 'jsonModel>/WorkOrderDetail/FunctionalLocationName'}], formatter: '.formatter.commonIDFormatter'}"
										class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>BasicStart}" design="Bold"/>
									<Label width="84px" text="{path:'jsonModel>/WorkOrderDetail/BasicStart', formatter:'.formatter.date'}" class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>SchStart}" design="Bold"/>
									<Label width="84px" text="{path:'jsonModel>/WorkOrderDetail/ScheduledStart', formatter:'.formatter.date'}" class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>ReportedBy}" design="Bold"/>
									<Label width="104px" text="{jsonModel>/WorkOrderDetail/ReportedBy}" class="sapUiTinyMarginBegin"/>
								</FlexBox>
								<FlexBox width="100%" class="cisUiTinyMargin" justifyContent="Start">
									<Label width="104px" textAlign="Right" text="{i18n>PMActType}" design="Bold"/>
									<Label width="200px"
										text="{parts: [{path: 'jsonModel>/WorkOrderDetail/PmActivityType'}, {path: 'jsonModel>/WorkOrderDetail/PmActivityTypeName'}], formatter:'.formatter.commonIDFormatter'}"
										class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>Equipment}" design="Bold"/>
									<Label width="300px"
										text="{parts:[{path:'jsonModel>/WorkOrderDetail/Equipment'}, {path: 'jsonModel>/WorkOrderDetail/EquipmentName'}], formatter:'.formatter.equipment'}"
										class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>BasicFinish}" design="Bold"/>
									<Label width="84px" text="{path:'jsonModel>/WorkOrderDetail/BasicFinish', formatter:'.formatter.date'}" class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>SchFinish}" design="Bold"/>
									<Label width="84px" text="{path:'jsonModel>/WorkOrderDetail/ScheduledFinish', formatter:'.formatter.date'}" class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>Priority}" design="Bold"/>
									<Label width="164px" text="{jsonModel>/WorkOrderDetail/Priority}" class="sapUiTinyMarginBegin"/>
								</FlexBox>
							</FlexBox>
							<HBox height="86%" justifyContent="Center">
								<VBox width="60%">
									<VBox height="50%">
										<table:Table id="OperationsTable" rows="{path:'jsonModel>/Operations', templateShareable:false}" selectionMode="MultiToggle"
											visibleRowCountMode="Auto" minAutoRowCount="9" class="sapUiTinyMarginBegin">
											<table:toolbar>
												<Toolbar>
													<content>
														<Title text="{i18n>Operations}"/>
														<ToolbarSpacer/>
														<Button type="Accept" width="80px" text="Add" icon="sap-icon://add-process" tooltip="{i18n>NewOperation}" press=".createNewRowOperations"/>
														<Button type="Reject" width="80px" text="Delete" icon="sap-icon://delete" tooltip="{i18n>DeleteselectedOperations}"
															press=".deleteSelectedOperations"/>
													</content>
												</Toolbar>
											</table:toolbar>
											<table:columns>
												<table:Column width="4rem">
													<Label text="{i18n>OpAc}"/>
													<table:template>
														<Input editable="{jsonModel>New}" value="{path:'jsonModel>OperationID', type : 'pd.pm.lite.customTypes.Number' }"/>
													</table:template>
												</table:Column>
												<table:Column width="8rem">
													<Label text="{i18n>WorkCenter}"/>
													<table:template>
														<ComboBox showSecondaryValues="true" value="{path: 'jsonModel>WorkCenter', type : 'pd.pm.lite.customTypes.Mandatory'}" items="{path:'localStorageModel>/WorkCenters', templateShareable:false}">
															<core:ListItem text="{localStorageModel>Id}" key="{localStorageModel>Id}" additionalText="{localStorageModel>Name}"></core:ListItem>
														</ComboBox>														
													</table:template>
												</table:Column>
												<table:Column hAlign="End">
													<Label text="{i18n>OpShortText}"/>
													<table:template>
														<Input value="{path: 'jsonModel>ShortText', type : 'pd.pm.lite.customTypes.Mandatory' }" maxLength="40"/>
													</table:template>
												</table:Column>
												<table:Column width="5rem">
													<Label text="{i18n>Work}"/>
													<table:template>
														<Input value="{path: 'jsonModel>WorkQuantity', type : 'pd.pm.lite.customTypes.Number'}"/>
													</table:template>
												</table:Column>
												<table:Column width="8rem">
													<Label text="{i18n>Unit}"/>
													<table:template>
														<ComboBox selectedKey="{path: 'jsonModel>WorkUnit', type : 'pd.pm.lite.customTypes.Mandatory'}" >
															<core:ListItem text="Minutes" key="MIN"></core:ListItem>
															<core:ListItem text="Hours" key="H"></core:ListItem>
															<core:ListItem text="Days" key="DAY"></core:ListItem>															
														</ComboBox>													
													</table:template>
												</table:Column>
												<table:Column width="7rem">
													<Label text="{i18n>ActualWork}"/>
													<table:template>
														<Label text="{jsonModel>ActualWork}"/>
													</table:template>
												</table:Column>
											</table:columns>
										</table:Table>
									</VBox>
									<VBox height="50%">
										<table:Table id="ComponentsTable" rows="{path: 'jsonModel>/Components', templateShareable:false}" minAutoRowCount="9"
											visibleRowCountMode="Auto" class="sapUiTinyMarginBegin">
											<table:toolbar>
												<Toolbar>
													<content>
														<Title text="Components"/>
														<ToolbarSpacer/>
														<Button type="Accept" width="80px" text="Add" icon="sap-icon://add-equipment" tooltip="{i18n>NewComponent}" press=".createNewRowComponents"/>
														<Button type="Reject" width="80px" text="Delete" icon="sap-icon://delete" tooltip="{i18n>DeleteselectedComponents}"
															press=".deleteSelectedComponents"/>
													</content>
												</Toolbar>
											</table:toolbar>
											<table:columns>
												<table:Column width="5rem">
													<Label text="{i18n>Item}"/>
													<table:template>
														<Input editable="{jsonModel>New}" value="{path:'jsonModel>ItemID', type : 'pd.pm.lite.customTypes.Number'}"/>
													</table:template>
												</table:Column>
												<table:Column width="9rem">
													<Label text="{i18n>Component}"/>
													<table:template>
														<Input showValueHelp="true" valueHelpRequest="showComponentValueHelp"
															value="{path: 'jsonModel>ComponentNumber', type : 'pd.pm.lite.customTypes.ComponentId'}" change=".getComponentDetail"/>
													</table:template>
												</table:Column>
												<table:Column hAlign="End">
													<Label text="{i18n>Description}"/>
													<table:template>
														<Label text="{jsonModel>Description}"/>
													</table:template>
												</table:Column>
												<table:Column width="5rem">
													<Label text="{i18n>ReqQuantity}"/>
													<table:template>
														<Input value="{ path: 'jsonModel>RequirementQuantity', type : 'pd.pm.lite.customTypes.Number'}"/>
													</table:template>
												</table:Column>
												<table:Column width="4rem">
													<Label text="{i18n>Unit}"/>
													<table:template>
														<ComboBox editable="false" showSecondaryValues="true" value ="{path: 'jsonModel>Unit', type : 'pd.pm.lite.customTypes.Mandatory'}" >
															<core:ListItem text="{Key}" key="{Key}" additionalText="{Text}"></core:ListItem>
														</ComboBox>
													</table:template>
												</table:Column>
												<table:Column width="5rem">
													<Label text="{i18n>IC}"/>
													<table:template>
														<Label text="{jsonModel>ItemCategory}"/>
													</table:template>
												</table:Column>
												<table:Column width="7rem">
													<Label text="{i18n>OperationReference}"/>
													<table:template>
														<Input value="{path: 'jsonModel>OperationReference',  type : 'pd.pm.lite.customTypes.Operation'}"/>
													</table:template>
												</table:Column>
											</table:columns>
										</table:Table>
									</VBox>
								</VBox>
								<VBox width="40%" direction="Column" class="sapUiTinyMarginBegin pdForm">
									<!--<f:SimpleForm  class="notificationBox" minWidth="1024" maxContainerCols="2" editable="false" layout="ResponsiveGridLayout"-->
									<!--	title="Notification" labelSpanL="1" labelSpanM="1" emptySpanL="0" emptySpanM="0" columnsL="1" columnsM="1">-->
									<f:SimpleForm class="notificationBox" maxContainerCols="2" editable="false" layout="ResponsiveGridLayout" title="Notification"
										labelSpanL="2" labelSpanM="2" emptySpanL="0" emptySpanM="0" columnsL="1" columnsM="1">
										<f:content>
											<Label text="{i18n>Code}" class="PDLabel"/>
											<ComboBox selectedKey="{jsonModel>/WorkOrderDetail/NotificationCode}" items="{path:'NotificationCodes', templateShareable:false}">
												<core:Item key="{Code}" text="{Name}"/>
											</ComboBox>
											<Label text="{i18n>Note}" class="PDLabel"/>
											<Input value="{jsonModel>/WorkOrderDetail/NewNote}"/>
											<Label text=""/>
											<FormattedText class="oldNotes" htmlText="{jsonModel>/WorkOrderDetail/NotificationLongText}"></FormattedText>
											<!--<core:HTML class="oldNotes" content="{jsonModel>/WorkOrderDetail/NotificationLongText}"/>-->
										</f:content>
									</f:SimpleForm>
									<f:SimpleForm class="notificationBox" maxContainerCols="2" editable="false" layout="ResponsiveGridLayout" title="Failure Data"
										labelSpanL="2" labelSpanM="2" emptySpanL="0" emptySpanM="0" columnsL="1" columnsM="1">
										<f:content>
											<Label text="{i18n>Damage}" class="PDLabel"/>
											<ComboBox showSecondaryValues="true" selectedKey="{jsonModel>/WorkOrderDetail/Damage/DamageCodeGroup}" items="{DamageCodeGroups}"
												selectionChange=".getValidDamageCodes">
												<core:ListItem key="{CodeGroup}" text="{CodeGroup}" additionalText="{Name}"/>
											</ComboBox>
											<ComboBox showSecondaryValues="true" selectedKey="{jsonModel>/WorkOrderDetail/Damage/DamageCode}" items="{DamageCodes}">
												<core:ListItem key="{Code}" text="{Code}" additionalText="{Name}"/>
											</ComboBox>
											<Label text="{i18n>Text}" class="PDLabel"/>
											<Input value="{jsonModel>/WorkOrderDetail/Damage/DamageText}" maxLength="40"/>
											<Label text="{i18n>CauseCode}" class="PDLabel"/>
											<ComboBox showSecondaryValues="true" selectedKey="{jsonModel>/WorkOrderDetail/Cause/CauseCodeGroup}" items="{CauseCodeGroups}"
												selectionChange=".getValidCauseCodes">
												<core:ListItem key="{CodeGroup}" text="{CodeGroup}" additionalText="{Name}"/>
											</ComboBox>
											<ComboBox showSecondaryValues="true" selectedKey="{jsonModel>/WorkOrderDetail/Cause/CauseCode}" items="{CauseCodes}">
												<core:ListItem key="{Code}" text="{Code}" additionalText="{Name}"/>
											</ComboBox>
											<Label text="{i18n>Text}" class="PDLabel"/>
											<Input value="{jsonModel>/WorkOrderDetail/Cause/CauseText}" maxLength="40"/>
										</f:content>
									</f:SimpleForm>
								</VBox>
							</HBox>
						</VBox>
					</HBox>
				</content>
				<dependents>
					<core:Fragment fragmentName="pd.pm.lite.view.WorkCenterDialog" type="XML"/>
					<core:Fragment fragmentName="pd.pm.lite.view.ComponentDialog" type="XML"/>
				</dependents>
			</Page>
		</pages>
	</App>
	<BusyDialog id="ChangeBusyDialog"/>
</mvc:View>