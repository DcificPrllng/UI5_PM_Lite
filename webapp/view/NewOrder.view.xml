<mvc:View class="sapUiSizeCompact" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"
	xmlns:html="http://www.w3.org/1999/xhtml" xmlns:table="sap.ui.table" xmlns:f="sap.ui.layout.form" busyIndicatorDelay="0"
	controllerName="pd.pm.lite.controller.NewOrder">
	<App>
		<pages>
			<Page title="{createModel>/ShortDescription}" showHeader="false" class="cisLabels">
				<content>
					<HBox justifyContent="Center" height="100%">
						<VBox width="90%" height="100%" direction="Column" alignContent="Center" alignItems="Center">
							<!--Page Header-->
							<FlexBox width="100%" height="14%" direction="Column" class="PDHeader sapUiTinyMargin">
								<!--First Row-->
								<FlexBox width="100%" class="cisUiTinyMargin" justifyContent="Start">
									<Button class="sapUiTinyMarginBegin" type="Accept" id="save" icon="sap-icon://save" width="85px" text="{i18n>Save}" press=".SaveOrder"/>
									<Button class="sapUiTinyMarginBegin" type="Reject" id="cancel" icon="sap-icon://cancel" width="85px" text="{i18n>Cancel}" press=".GoHome"/>
									<Label width="146px" class="cisTopMargin" textAlign="Right" text="{i18n>Description}" design="Bold"/>
									<Input width="300px" class="sapUiTinyMarginBegin"
										value="{path: 'createModel>/WorkOrderDetails/ShortDescription', type : 'pd.pm.lite.customTypes.Mandatory'}" maxLength="40"/>
								</FlexBox>
								<!--Second Row-->
								<FlexBox width="100%" class="cisUiTinyMargin" justifyContent="Start">
									<Label width="104px" textAlign="Right" text="{i18n>MainWorkCenter}" class="cisLabels cisTopMargin" design="Bold"/>
									<ComboBox class="sapUiTinyMarginBegin" id="workCenterId" items="{localStorageModel>/WorkCenters}" showSecondaryValues="true"
										selectedKey="{createModel>/WorkOrderDetail/MainWorkCenter}" width="200px">
										<items>
											<core:ListItem text="{localStorageModel>Id}"/>
										</items>
									</ComboBox>
									<Label width="104px" textAlign="Right" text="{i18n>FunLoc}" class="cisLabels cisTopMargin" design="Bold"/>
									<Label width="300px"
										text="{parts:[{path: 'createModel>/WorkOrderDetail/FunctionalLocation'}, {path: 'createModel>/WorkOrderDetail/FunctionalLocationName'}], formatter: '.formatter.commonIDFormatter'}"
										class="sapUiTinyMarginBegin cisLabels cisTopMargin"/>
									<Label width="104px" textAlign="Right" text="{i18n>BasicStart}" design="Bold" class="cisLabels cisTopMargin"/>
									<DatePicker width="124px" dateValue="{createModel>/WorkOrderDetail/BasicStart}" class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>SchStart}" design="Bold" class="cisLabels cisTopMargin"/>
									<DatePicker width="124px" dateValue="{createModel>/WorkOrderDetails/ScheduledStart}" class="sapUiTinyMarginBegin"/>
								</FlexBox>
								<!--Third Row-->
								<FlexBox width="100%" class="cisUiTinyMargin" justifyContent="Start">
									<Label width="104px" textAlign="Right" text="{i18n>PMActType}" design="Bold" class="cisTopMargin"/>
									<ComboBox width="200px" items="{/ActivityTypes}" selectedKey="{createModel>/WorkOrderDetail/PmActivityType}"
										class="sapUiTinyMarginBegin cisLabels cisTopMargin">
										<items>
											<core:ListItem text="{Name}" key="{Code}"/>
										</items>										
									</ComboBox>
									<Label width="104px" textAlign="Right" text="{i18n>Equipment}" design="Bold" class="cisLabels cisTopMargin"/>
									<Label width="300px"
										text="{parts:[{path:'createModel>/WorkOrderDetail/Equipment'}, {path: 'createModel>/WorkOrderDetail/EquipmentName'}], formatter:'.formatter.commonIDFormatter'}"
										class="sapUiTinyMarginBegin cisLabels cisTopMargin"/>
									<Label width="104px" textAlign="Right" text="{i18n>BasicFinish}" design="Bold" class="cisLabels cisTopMargin"/>
									<DatePicker width="124px" dateValue="{createModel>/WorkOrderDetail/BasicFinish}" class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>SchFinish}" design="Bold" class="cisLabel cisTopMargins cisTopMargin"/>
									<DatePicker width="124px" dateValue="{createModel>/WorkOrderDetail/ScheduledFinish}" class="sapUiTinyMarginBegin"/>
									<Label width="104px" textAlign="Right" text="{i18n>Priority}" design="Bold" class="cisLabels cisTopMargin"/>
									<ComboBox width="164px" selectedKey="{createModel>/WorkOrderDetail/Priority}" class="sapUiTinyMarginBegin"/>
								</FlexBox>
							</FlexBox>
							<HBox height="86%" justifyContent="Center">
								<!--Operations and Components Tables-->
								<VBox width="60%">
									<!--Operations Table-->
									<VBox height="50%">
										<table:Table id="OperationsTable" rows="{path:'createModel>/WorkOrderDetail/Operations', templateShareable:false}" selectionMode="MultiToggle" visibleRowCountMode="Auto"
											minAutoRowCount="9" class="sapUiTinyMarginBegin">
											<table:toolbar>
												<Toolbar>
													<content>
														<Title text="{i18n>Operations}"/>
														<ToolbarSpacer/>
														<Button type="Accept" width="80px" text="Add" icon="sap-icon://add-process" tooltip="{i18n>NewOperation}" press=".createNewRowOperations"/>
														<Button type="Reject" width="80px" text="Delete" icon="sap-icon://delete" tooltip="{i18n>DeleteselectedOperations}"
															press=".deleteSelectedOperations"/>
													</content>
												</Toolbar>
											</table:toolbar>
											<table:columns>
												<table:Column width="4rem">
													<Label text="{i18n>OpAc}"/>
													<table:template>
														<Input editable="{createModel>New}" value="{path:'createModel>OperationID', type : 'pd.pm.lite.customTypes.Number' }"/>
													</table:template>
												</table:Column>
												<table:Column width="8rem">
													<Label text="{i18n>WorkCenter}"/>
													<table:template>
														<ComboBox showSecondaryValues="true" value="{path: 'createModel>WorkCenter', type : 'pd.pm.lite.customTypes.Mandatory'}"
															items="{path:'localStorageModel>/WorkCenters', templateShareable:false}">
															<core:ListItem text="{localStorageModel>Id}" key="{localStorageModel>Id}" additionalText="{localStorageModel>Name}"></core:ListItem>
														</ComboBox>
													</table:template>
												</table:Column>
												<table:Column hAlign="End">
													<Label text="{i18n>OpShortText}"/>
													<table:template>
														<Input value="{path: 'createModel>ShortText', type : 'pd.pm.lite.customTypes.Mandatory' }" maxLength="40"/>
													</table:template>
												</table:Column>
												<table:Column width="5rem">
													<Label text="{i18n>Work}"/>
													<table:template>
														<Input value="{path: 'createModel>WorkQuantity', type : 'pd.pm.lite.customTypes.Number'}"/>
													</table:template>
												</table:Column>
												<table:Column width="8rem">
													<Label text="{i18n>Unit}"/>
													<table:template>
														<ComboBox selectedKey="{path: 'createModel>WorkUnit', type : 'pd.pm.lite.customTypes.Mandatory'}">
															<core:ListItem text="Minutes" key="MIN"></core:ListItem>
															<core:ListItem text="Hours" key="H"></core:ListItem>
															<core:ListItem text="Days" key="DAY"></core:ListItem>
														</ComboBox>
													</table:template>
												</table:Column>
												<table:Column width="9rem">
													<Label text="{i18n>ActualWork}"/>
													<table:template>
														<Label text="{ActualWork}"/>
													</table:template>
												</table:Column>
											</table:columns>
										</table:Table>
									</VBox>
									<!--Components Table-->
									<VBox height="50%">
										<table:Table id="ComponentsTable" rows="{path: 'createModel>/WorkOrderDetail/Components', templateShareable:false}" minAutoRowCount="9"
											visibleRowCountMode="Auto" class="sapUiTinyMarginBegin">
											<table:toolbar>
												<Toolbar>
													<content>
														<Title text="Components"/>
														<ToolbarSpacer/>
														<Button type="Accept" width="80px" text="Add" icon="sap-icon://add-equipment" tooltip="{i18n>NewComponent}" press=".createNewRowComponents"/>
														<Button type="Reject" width="80px" text="Delete" icon="sap-icon://delete" tooltip="{i18n>DeleteselectedComponents}"
															press=".deleteSelectedComponents"/>
													</content>
												</Toolbar>
											</table:toolbar>
											<table:columns>
												<table:Column width="5rem">
													<Label text="{i18n>Item}"/>
													<table:template>
														<Input editable="{createModel>New}" value="{path:'createModel>ItemID', type : 'pd.pm.lite.customTypes.Number'}"/>
													</table:template>
												</table:Column>
												<table:Column width="9rem">
													<Label text="{i18n>Component}"/>
													<table:template>
														<Input showValueHelp="true" valueHelpRequest="showComponentValueHelp"
															value="{path: 'createModel>>ComponentNumber', type : 'pd.pm.lite.customTypes.ComponentId'}" change=".getComponentDetail"/>
													</table:template>
												</table:Column>
												<table:Column hAlign="End">
													<Label text="{i18n>Description}"/>
													<table:template>
														<Label text="{createModel>>Description}"/>
													</table:template>
												</table:Column>
												<table:Column width="5rem">
													<Label text="{i18n>ReqQuantity}"/>
													<table:template>
														<Input value="{ path: 'createModel>>RequirementQuantity', type : 'pd.pm.lite.customTypes.Number'}"/>
													</table:template>
												</table:Column>
												<table:Column width="6rem">
													<Label text="{i18n>Unit}"/>
													<table:template>
														<ComboBox editable="false" showSecondaryValues="true" value="{path: 'createModel>>Unit', type : 'pd.pm.lite.customTypes.Mandatory'}"
															items="{path:'Units', templateShareable:false}">
															<core:ListItem text="{Key}" key="{Key}" additionalText="{Text}"></core:ListItem>
														</ComboBox>
													</table:template>
												</table:Column>
												<table:Column width="5rem">
													<Label text="{i18n>IC}"/>
													<table:template>
														<Label text="{createModel>>ItemCategory}"/>
													</table:template>
												</table:Column>
												<table:Column width="5rem">
													<Label text="{i18n>OperationReference}"/>
													<table:template>
														<Input value="{path: 'createModel>>OperationReference', type : 'pd.pm.lite.customTypes.Operation'}"/>
													</table:template>
												</table:Column>
											</table:columns>
										</table:Table>
									</VBox>
								</VBox>
								<!--Notification and Failure Data-->
								<VBox width="40%" direction="Column" class="sapUiTinyMarginBegin pdForm">
									<!--Notification-->
									<f:SimpleForm class="notificationBox" maxContainerCols="2" editable="false" layout="ResponsiveGridLayout" title="Notification"
										labelSpanL="2" labelSpanM="2" emptySpanL="0" emptySpanM="0" columnsL="1" columnsM="1">
										<f:content>
											<Label text="{i18n>Code}" class="PDLabel"/>
											<ComboBox selectedKey="{createModel>/WorkOrderDetail/NotificationCode}" items="{path:'NotificationCodes', templateShareable:false}">
												<core:Item key="{Code}" text="{Name}"/>
											</ComboBox>
											<Label text="{i18n>Note}" class="PDLabel"/>
											<Input value="{createModel>/WorkOrderDetail/NewNote}"/>
											<Label text=""/>
											<FormattedText class="oldNotes" htmlText="{createModel>/WorkOrderDetail/NotificationLongText}"></FormattedText>
											<!--<core:HTML class="oldNotes" content="{jsonModel>/WorkOrderDetail/NotificationLongText}"/>-->
										</f:content>
									</f:SimpleForm>
									<!--Failure Data-->
									<f:SimpleForm class="notificationBox" maxContainerCols="2" editable="false" layout="ResponsiveGridLayout" title="Failure Data"
										labelSpanL="2" labelSpanM="2" emptySpanL="0" emptySpanM="0" columnsL="1" columnsM="1">
										<f:content>
											<Label text="{i18n>Damage}" class="PDLabel"/>
											<ComboBox showSecondaryValues="true" selectedKey="{createModel>/WorkOrderDetail/Damage/DamageCodeGroup}" items="{DamageCodeGroups}"
												selectionChange=".getValidDamageCodes">
												<core:ListItem key="{CodeGroup}" text="{CodeGroup}" additionalText="{Name}"/>
											</ComboBox>
											<ComboBox showSecondaryValues="true" selectedKey="{createModel>/WorkOrderDetail/Damage/DamageCode}" items="{DamageCodes}">
												<core:ListItem key="{Code}" text="{Code}" additionalText="{Name}"/>
											</ComboBox>
											<Label text="{i18n>Text}" class="PDLabel"/>
											<Input value="{createModel>/WorkOrderDetail/Damage/DamageText}" maxLength="40"/>
											<Label text="{i18n>CauseCode}" class="PDLabel"/>
											<ComboBox showSecondaryValues="true" selectedKey="{createModel>/WorkOrderDetail/Cause/CauseCodeGroup}" items="{CauseCodeGroups}"
												selectionChange=".getValidCauseCodes">
												<core:ListItem key="{CodeGroup}" text="{CodeGroup}" additionalText="{Name}"/>
											</ComboBox>
											<ComboBox showSecondaryValues="true" selectedKey="{createModel>/WorkOrderDetail/Cause/CauseCode}" items="{CauseCodes}">
												<core:ListItem key="{Code}" text="{Code}" additionalText="{Name}"/>
											</ComboBox>
											<Label text="{i18n>Text}" class="PDLabel"/>
											<Input value="{createModel>/WorkOrderDetail/Cause/CauseText}" maxLength="40"/>
										</f:content>
									</f:SimpleForm>
								</VBox>
							</HBox>
						</VBox>
					</HBox>
				</content>
				<dependents>
					<core:Fragment fragmentName="pd.pm.lite.view.WorkCenterDialog" type="XML"/>
					<core:Fragment fragmentName="pd.pm.lite.view.ComponentDialog" type="XML"/>
				</dependents>
			</Page>
		</pages>
	</App>
	<BusyDialog id="ChangeBusyDialog"/>
</mvc:View>