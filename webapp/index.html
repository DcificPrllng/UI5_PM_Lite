<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Cache-Control" content="public" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta charset="utf-8">
		<title>PM Lite</title>
		<link rel="icon" href="data:;base64,iVBORw0KGgo=">
		<!--Other options are
		index_gateway.html
		index_localhost.html
		index_sap_cdn.html
		index_pd_cdn.html
		index_pd_bora_cdn.html-->
		<script
				id="sap-ui-bootstrap"
				src="https://sapui5.hana.ondemand.com/1.44.27/resources/sap-ui-core.js" 				
				data-sap-ui-libs="sap.m,sap.ui.layout,sap.ui.table"
				data-sap-ui-bindingSyntax="complex"
				data-sap-ui-compatVersion="edge"
				data-sap-ui-theme="sap_bluecrystal"
				data-sap-ui-language="en"
				data-sap-ui-preload="async"
				data-sap-ui-appCacheBuster="./"
				data-sap-ui-resourceroots='{
					"pd.pm.lite": "./"
				}'>
		</script>
		
		<script>
			sap.ui.getCore().attachInit(function () {
				jQuery.sap.setIcons({
					'favicon':'icons/favicons.png'
				});
				sap.ui.require([
					"sap/ui/unified/Shell",
					// "sap/m/Shell",
					"sap/ui/core/ComponentContainer"
				], function (oShell, ComponentContainer) {
			    		var ComponentContainer = new ComponentContainer({
	                                	height : "100%"
    				    });		        

		function logoff(){
    		$.ajax({
        		type: "GET",
        		url: "/sap/public/bc/icf/logoff",  //Clear SSO cookies: SAP Provided service to do that
        		async: false
        	});
        	
            if (!document.execCommand("ClearAuthenticationCache")) {
                 //"ClearAuthenticationCache" will work only for IE. Below code for other browsers
                 $.ajax({
                               type: "GET",
                               url: "/sap/opu/odata/sap/ZWORKORDER_SRV?saml2=disabled", //any URL to a Gateway service
                               username: 'dummy', //dummy credentials: when request fails, will clear the authentication header
                               password: 'dummy',
                               statusCode: { 401: function() { //We expect 401 as we have given invalid credentials.
                                         //This handler function will prevent authentication pop-up in chrome/firefox
                                         location.reload();
                               } },
                               error: function() {
                                    //alert('reached error of wrong username password')
                               }
                });
            }
		}
		
		new oShell({
        headEndItems: [new sap.ui.unified.ShellHeadItem({
            					tooltip:"Logoff",
	                            icon:"sap-icon://log",
	                            press: logoff
	    })],
        content: ComponentContainer
    	}).addStyleClass("sapUiSizeCompact").placeAt("content");
			        
		var component = sap.ui.component({
                     	name : "pd.pm.lite",
                     	manifestFirst: true,
                     	handleValidation: true,
                     	async: true
	    				}).then(function(component){
 							ComponentContainer.setComponent(component);
						});
				});
			});
		</script>
	</head>
	<body class="sapUiBody" id="content">
	</body>
</html>